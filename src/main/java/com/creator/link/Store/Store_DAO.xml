<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.creator.link.Store.Store_Service">
<select id="store_mainout" resultType="com.creator.link.Store.Store_DTO">
	select * from PRODUCT_TBL
</select>
<insert id="store_insert0">
	insert into PRODUCT_TBL(PD_NUMBER,PD_NAME,PD_PRICE,PD_CATEGORY,PD_CONTENT,PD_PHOTO,PD_STOCK,MB_NUMBER,PC_NUMBER,PD_SIZE,MF_NUMBER)
    VALUES(PD_NUMBER_SQL.nextval,#{param1},#{param2},#{param3},#{param4},#{param5},#{param6},#{param7},1001,'only one',1001)
</insert>
<insert id="os1_insert">
	INSERT INTO product_opstion_tbl(OS_NUMBER,PD_NUMBER,OS_1NAME,OS_PRICE,OS_PHOTO,OS_STOCK) 
	VALUES (OS_NUMBER_SQL.nextval,#{param1},#{param2},#{param3},#{param4},#{param5})
</insert>
<insert id="os2_insert">
	INSERT INTO product_opstion_tbl(OS_NUMBER,PD_NUMBER,OS_1NAME,OS_2NAME,OS_PRICE,OS_PHOTO,OS_STOCK) 
	VALUES (OS_NUMBER_SQL.nextval,#{param1},#{param2},#{param3},#{param4},#{param5},#{param6})
</insert>
<insert id="os3_insert">
	INSERT INTO product_opstion_tbl(OS_NUMBER,PD_NUMBER,OS_1NAME,OS_2NAME,OS_3NAME,OS_PRICE,OS_PHOTO,OS_STOCK) 
	VALUES (OS_NUMBER_SQL.nextval,#{param1},#{param2},#{param3},#{param4},#{param5},#{param6},#{param7})
</insert>
<insert id="od_insert">
	INSERT INTO ORDER_TBL(OD_NUMBER,OD_ID,OD_DATE,OD_PD_NAME,OD_PD_QNT,OD_PRICE,OD_CP_CODE,MB_NUMBER,ZIP_CODE,DLVY_ADDRESS,DLVY_ADDRESS_DONG,DLVY_DETAIL,DLVY_COMMENT)
	VALUES (OD_NUMBER_SQL.nextval,#{param1},sysdate,#{param2},#{param3},#{param4},#{param5},#{param6},#{param7},#{param8},#{param9},#{param10},#{param11})
</insert>
<insert id="od_insert_os">
	INSERT INTO ORDER_TBL(OD_NUMBER,OD_ID,OD_DATE,OD_PD_NAME,OD_PD_QNT,OD_PRICE,OD_CP_CODE,MB_NUMBER,OS_NUMBER,ZIP_CODE,DLVY_ADDRESS,DLVY_ADDRESS_DONG,DLVY_DETAIL,DLVY_COMMENT)
	VALUES (OS_NUMBER_SQL.nextval,#{param1},sysdate,#{param2},#{param3},#{param4},#{param5},#{param6},#{param7},#{param8},#{param9},#{param10},#{param11},#{param12})
</insert>
<select id="store_detail" resultType="com.creator.link.Store.Store_DTO">
	select * from PRODUCT_TBL where PD_NUMBER = #{param1}
</select>
<select id="store_os_detail" resultType="com.creator.link.Store.Store_OS_DTO">
	select * from PRODUCT_OPSTION_TBL where PD_NUMBER = #{param1}
</select>
<select id="os_1name_search" resultType="String">
	select os_1name from PRODUCT_OPSTION_TBL where PD_NUMBER = #{param1} GROUP BY os_1name ORDER BY os_1name
</select>
<select id="os_2name_search" resultType="String">
	select os_2name from PRODUCT_OPSTION_TBL where PD_NUMBER = #{param1} GROUP BY os_2name ORDER BY os_2name
</select>
<select id="os_3name_search" resultType="String">
	select os_3name from PRODUCT_OPSTION_TBL where PD_NUMBER = #{param1} GROUP BY os_3name ORDER BY os_3name
</select>
<select id="store_max_index" resultType="int">
	SELECT max(PD_NUMBER) FROM product_tbl
</select>
<select id="select_os_1number" resultType="int">
	select os_number from PRODUCT_OPSTION_TBL where PD_NUMBER = #{param1} and os_1name = #{param2} and os_2name = #{param3} and os_3name = #{param4}
</select>
<select id="select_os_2number" resultType="int">
	select os_number from PRODUCT_OPSTION_TBL where PD_NUMBER = #{param1} and os_1name = #{param2} and os_2name = #{param3}
</select>
<select id="select_os_3number" resultType="int">
	select os_number from PRODUCT_OPSTION_TBL where PD_NUMBER = #{param1} and os_1name = #{param2}
</select>
<select id="select_os" resultType="com.creator.link.Store.Store_OS_DTO">
	select * from PRODUCT_OPSTION_TBL where os_number = #{param1}
</select>
<select id="od_select_number" resultType="int">
	SELECT max(od_number) FROM order_tbl WHERE od_id = #{param1} and od_pd_name = #{param2} and mb_number= #{param3}
</select>
<update id="od_updata_pd">
	UPDATE PRODUCT_TBL SET pd_stock = pd_stock-#{param2} WHERE pd_number=#{param1}
</update>
<update id="od_updata_os">
	UPDATE PRODUCT_OPSTION_TBL SET os_stock = os_stock-#{param2} WHERE pd_number=#{param1} and OS_NUMBER = #{param3}
</update>
</mapper>